<!-- Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø¹Ø¯Ù„ -->
<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ù…Ù† - aljx_67</title>
  <style>
    body {
      font-family: 'Courier New', Courier, monospace;
      text-align: center;
      padding: 20px;
      background-color: #333;
      color: white;
      position: relative;
      direction: rtl;
    }
    #console-output {
      margin-top: 20px;
      font-family: monospace;
      font-size: 14px;
      background-color: black;
      color: white;
      padding: 10px;
      width: 80%;
      height: 300px;
      overflow-y: auto;
      margin: 0 auto;
      border: 2px solid #666;
      border-radius: 5px;
      white-space: pre-wrap;
    }
    #console-input {
      width: 80%;
      font-size: 14px;
      padding: 8px;
      margin-top: 10px;
      border: 2px solid #666;
      border-radius: 5px;
      background-color: #222;
      color: white;
    }
    button {
      font-size: 16px;
      padding: 10px 20px;
      margin: 10px;
      border: 2px solid #444;
      cursor: pointer;
      border-radius: 5px;
    }
    #start-server { background-color: green; color: white; }
    #stop-server { background-color: red; color: white; display: none; }
    #restart-server { background-color: blue; color: white; display: none; }
    button:hover { opacity: 0.8; }

    /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© */
    #menu-icon {
      position: absolute;
      top: 10px;
      right: 10px;
      cursor: pointer;
      z-index: 2;
    }
    #menu-icon div {
      width: 30px;
      height: 5px;
      background-color: white;
      margin: 5px 0;
    }
    #side-menu {
      position: fixed;
      top: 0;
      right: -260px;
      width: 260px;
      height: 100%;
      background-color: #444;
      padding-top: 20px;
      transition: 0.3s;
      z-index: 1;
      color: white;
    }
    #side-menu.show { right: 0; }
    #side-menu a {
      padding: 12px 20px;
      text-decoration: none;
      font-size: 17px;
      color: white;
      display: block;
    }
    #side-menu a:hover {
      background-color: #666;
    }

    /* Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ */
    #resource-usage {
      margin-top: 20px;
      font-size: 16px;
      background-color: #222;
      padding: 15px;
      width: 80%;
      margin-left: auto;
      margin-right: auto;
      border-radius: 5px;
      border: 2px solid #666;
      color: #0f0;
      text-align: left;
      font-family: monospace;
      white-space: pre-line;
    }

    /* ØµÙˆØ±Ø© Ù…Ø§ÙŠÙ†ÙƒØ±Ø§ÙØª */
    .minecraft-icon {
      margin-top: 30px;
    }
    .minecraft-icon img {
      width: 100px;
    }
  </style>
</head>
<body>

  <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªÙ†Ù‚Ù„ -->
  <div id="menu-icon" onclick="toggleMenu()">
    <div></div><div></div><div></div>
  </div>

  <h1>ğŸ› ï¸ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ù…Ù† - aljx_67</h1>

  <div id="console-output"></div>
  <input type="text" id="console-input" placeholder="Ø£Ø¯Ø®Ù„ Ø£Ù…Ø± Ù‡Ù†Ø§..." />

  <div class="buttons">
    <button id="start-server" onclick="startServer()">ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙŠØ±ÙØ±</button>
    <button id="stop-server" onclick="stopServer()">Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø³ÙŠØ±ÙØ±</button>
    <button id="restart-server" onclick="restartServer()">Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙŠØ±ÙØ±</button>
  </div>

  <!-- Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ -->
  <div id="resource-usage">
    <h3>Ø­Ø§Ù„Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙˆØ§Ø±Ø¯:</h3>
    <div id="ram-usage">RAM: ...</div>
    <div id="cpu-usage">CPU: ...</div>
    <div id="disk-usage">Disk: ...</div>
  </div>

  <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© -->
  <div id="side-menu">
    <a href="/editor" target="_blank">ğŸ“ ØªØ¹Ø¯ÙŠÙ„ Ù…Ù„ÙØ§Øª Ø§Ù„Ø³ÙŠØ±ÙØ±</a>
    <a href="/players.html" target="_blank">ğŸ‘¥ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† + Ø§Ù„ØªØ­ÙƒÙ…</a>
    <a href="/settings" target="_blank">âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø³ÙŠØ±ÙØ±</a>
    <a href="/add-admin" target="_blank">ğŸ” Ø¥Ø¯Ø§Ø±Ø© ØµÙ„Ø§Ø­ÙŠØ§Øª Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù†</a>
  </div>

  <!-- ØµÙˆØ±Ø© Ø¯ÙŠÙƒÙˆØ±ÙŠØ© -->
  <div class="minecraft-icon">
    <img src="https://static.wikia.nocookie.net/minecraft_gamepedia/images/d/d7/Grass_Block_JE6_BE6.png" alt="Minecraft Icon" />
  </div>

  <!-- Ø§Ù„Ø³ÙƒØ±Ø¨Øª -->
  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();
    const consoleInput = document.getElementById('console-input');

    consoleInput.addEventListener('keypress', e => {
      if (e.key === 'Enter') sendCommand();
    });

    function sendCommand() {
      const cmd = consoleInput.value.trim();
      if (!cmd) return;
      socket.emit('send-command', cmd);
      consoleInput.value = '';
    }

    socket.on('console-output', data => {
      const out = document.getElementById('console-output');
      out.textContent += data + '\n';
      out.scrollTop = out.scrollHeight;
      saveToLocalStorage(data);
    });

    socket.on('server-status', isRunning => {
      document.getElementById('start-server').style.display = isRunning ? 'none' : 'inline-block';
      document.getElementById('stop-server').style.display = isRunning ? 'inline-block' : 'none';
      document.getElementById('restart-server').style.display = isRunning ? 'inline-block' : 'none';
    });

    socket.on('resource-usage', data => {
      document.getElementById('ram-usage').textContent = `RAM: ${data.ram}`;
      document.getElementById('cpu-usage').textContent = `CPU: ${data.cpu}`;
      document.getElementById('disk-usage').textContent = `Disk: ${data.disk}`;
    });

    function startServer() { socket.emit('start-server'); }
    function stopServer() { socket.emit('stop-server'); clearConsole(); }
    function restartServer() { stopServer(); setTimeout(startServer, 3000); }

    function toggleMenu() {
      document.getElementById('side-menu').classList.toggle('show');
    }

    function saveToLocalStorage(data) {
      let existing = localStorage.getItem('console-output') || '';
      localStorage.setItem('console-output', existing + data + '\n');
    }

    function loadFromLocalStorage() {
      const saved = localStorage.getItem('console-output');
      if (saved) {
        const out = document.getElementById('console-output');
        out.textContent = saved;
        out.scrollTop = out.scrollHeight;
      }
    }

    function clearConsole() {
      localStorage.removeItem('console-output');
      document.getElementById('console-output').textContent = '';
    }

    loadFromLocalStorage();
  </script>
</body>
</html>
